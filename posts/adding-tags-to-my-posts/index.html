<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2025-09-30 Tue 17:19 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Adding tags to my posts</title>
<meta name="generator" content="Org mode">
<meta name="author" content="root">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" integrity="sha384-DyZ88mC6Up2uqS4h/KRgHuoeGwBcD4Ng9SiP4dIRy0EXTlnuz47vAwmeGwVChigm" crossorigin="anonymous">        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/light.css">        <link rel="stylesheet" href="/css/style.css"> 	        <!-- Icons -->       <link rel="apple-touch-icon" sizes="180x180" href="/img/icons/apple-touch-icon.png">       <link rel="icon" type="image/png" sizes="32x32" href="/img/icons/favicon-32x32.png">       <link rel="icon" type="image/png" sizes="16x16" href="/img/icons/favicon-16x16.png">       <link rel="manifest" href="/img/icons/site.webmanifest">       <link rel="mask-icon" href="/img/icons/safari-pinned-tab.svg" color="#5bbad5">       <link rel="shortcut icon" href="/img/icons/favicon.ico">       <meta name="msapplication-TileColor" content="#da532c">       <meta name="msapplication-config" content="/img/icons/browserconfig.xml">       <meta name="theme-color" content="#ffffff">
<script type="text/javascript">
// @license magnet:?xt=urn:btih:e95b018ef3580986a04669f1b5879592219e2a7a&dn=public-domain.txt Public Domain
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<header id="preamble" class="status">
<aside>
  <a href="/">
    <img class="avatar" src="/img/photo.jpg"/>
  </a>
  <section>
    I help people solve hard problems. This often involves a computer.
  </section>

  <nav class="nav">
    <ul>
      <li>
        <a class="nav-item" href="/">Home</a>
        |
      </li>
      <li>
        <a class="nav-item" href="/posts/">Blog</a>
        |
      </li>

      <li>
        <a class="nav-item" href="/talks/">Talks</a>
        |
      </li>

      <li>
        <a class="nav-item" href="https://stackoverflow.com/users/2700399/bart-van-nierop">
          <i class="fab fa-stack-overflow"></i>
        </a>
        |
      </li>

      <li>
        <a class="nav-item" href="https://github.com/bvnierop">
          <i class="fab fa-github-square"></i>
        </a>
        |
      </li>

      <li>
        <a class="nav-item" href="https://www.linkedin.com/in/bart-van-nierop/">
          <i class="fab fa-linkedin"></i>
        </a>
      </li>

    </ul>
  </nav>
</aside>
</header>
<main id="content">
<header>
<h1 class="title">Adding tags to my posts</h1>
<p class="subtitle">Jun 09, 2021</p>
</header><p>
In <a href="../how-i-learned-to-let-go-and-ship-it">How I learned to let go and ship it</a> I wrote that I still needed to add
categories, or tags, to posts. This post details how I've done that.
</p>

<div id="outline-container-org5f3da79" class="outline-2">
<h2 id="org5f3da79">Categories or tags</h2>
<div class="outline-text-2" id="text-org5f3da79">
<p>
In Jekyll there's a difference between categories and tags. The main difference
is that, by default, categories are part of the posts url, while tags
aren't. Personally I prefer the latter for organisation, so tags it is.
</p>
</div>
</div>

<div id="outline-container-orgbc4acef" class="outline-2">
<h2 id="orgbc4acef">Adding tags to post metadata</h2>
<div class="outline-text-2" id="text-orgbc4acef">
<p>
My <a href="https://github.com/bvnierop/hyde">theme</a>, by default, shows the publish date of a post below the title. It's in
that line that I'd like to show tags.
</p>

<p>
Step one is to add the tags to the posts page. Here's what the line looked like
before:
</p>

<div class="org-src-container">
<pre class="src src-liquid">&lt;span class="post-date"&gt;{{ post.date | date_to_string }}&lt;/span&gt;
</pre>
</div>

<p>
And here's what it looks like after:
</p>
<div class="org-src-container">
<pre class="src src-liquid">&lt;span class="post-date"&gt;
  &amp;#x1F5D3; {{ date | date_to_string }}
  {% for tag in post.tags %}
    {% if forloop.first %}&amp;#x1f3f7;{% endif %}
    &lt;a href="/tags/#{{ tag }}"&gt;{{ tag }}&lt;/a&gt;
    {% unless forloop.last %}| {% endunless %}
  {% endfor %}
&lt;/span&gt;
</pre>
</div>

<p>
There's a lot going on here, so let's look at this more closely:
</p>

<table>


<colgroup>
<col  class="org-right">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">line</th>
<th scope="col" class="org-left">what it does</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">2.</td>
<td class="org-left">This is basically the original code. It shows the date. It's prefixed with a unicode calendar icon.</td>
</tr>

<tr>
<td class="org-right">3.</td>
<td class="org-left">Loop over the tags.</td>
</tr>

<tr>
<td class="org-right">4.</td>
<td class="org-left">If it's the first iteration, display a unicode tag icon.</td>
</tr>

<tr>
<td class="org-right">5.</td>
<td class="org-left">Display the tag, as a link to the tags page.</td>
</tr>

<tr>
<td class="org-right">6.</td>
<td class="org-left">If it's <i>not</i> the last iteration, display a separator.</td>
</tr>
</tbody>
</table>

<p>
Of course, this snippet exists twice. Once for the post details (as shown above)
and once for the index page. The differences are minor. Really the only thing
that's different is that instead of the word <code>post</code> the index page uses the word
<code>page</code>.
</p>
</div>
</div>

<div id="outline-container-org62a9cad" class="outline-2">
<h2 id="org62a9cad">Extracting it to a layout</h2>
<div class="outline-text-2" id="text-org62a9cad">
<p>
Of course, having this code in two places makes it prone to fail if I ever want
to add something else, or change something. So the next step is to extract it to
something reusable:
</p>

<div class="org-src-container">
<pre class="src src-liquid">{% if post %}
  {% assign date = post.date %}
  {% assign tags = post.tags %}
{% else %}
  {% assign date = page.date %}
  {% assign tags = page.tags %}
{% endif %}
&lt;span class="post-date"&gt;
  &amp;#x1F5D3; {{ date | date_to_string }}
  {% if tags.size &gt; 0 %}
    {% for tag in tags %}
      {% if forloop.first %}&amp;#x1f3f7;{% endif %}
      &lt;a href="/tags/#{{ tag }}"&gt;{{ tag }}&lt;/a&gt;
      {% unless forloop.last %}| {% endunless %}
    {% endfor %}
  {% endif %}
&lt;/span&gt;
</pre>
</div>

<p>
The big change is, of course, that we assign some variables from either <code>post</code>
<i>or</i> <code>page</code> and then work off those variables. And now in our post details and
on our index page we can use <code>{% raw %}{% include post_meta.html %}{% endraw %}</code>.
</p>
</div>
</div>

<div id="outline-container-org68a3fe1" class="outline-2">
<h2 id="org68a3fe1">Adding a tags page</h2>
<div class="outline-text-2" id="text-org68a3fe1">
<p>
As we saw earlier, each tag is a link to a <i>tags</i> page. We still have to make
that page. Below is the entire thing. It iterates over every tag and then over
every post for that tag, listing all.
</p>

<div class="org-src-container">
<pre class="src src-liquid">---
layout: page
---

&lt;div id="tags" class="tags"&gt;
  {% for tag in site.tags %}
  {% capture tag_name %}{{ tag | first }}{% endcapture %}
  &lt;div id="#{{ tag_name }}" class="tag"&gt;
    &lt;a name="{{ tag_name }}"&gt;&lt;/a&gt;
    &lt;h2&gt;{{ tag_name }}&lt;/h2&gt;
    {% for post in site.tags[tag_name] %}
    &lt;article&gt;
      {{ post.date | date_to_string }}..........&lt;a href="{{ post.url }}"&gt;{{ post.title }}&lt;/a&gt;
    &lt;/article&gt;
    {% endfor %}
  &lt;/div&gt;
{% endfor %}
&lt;/div&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org0869852" class="outline-2">
<h2 id="org0869852">Extracting <i>that</i> to a layout</h2>
<div class="outline-text-2" id="text-org0869852">
<p>
Because I've made all this part of my theme and I don't want to add the code for
the tags page to the source code of this website, I've pulled this code in
layout by moving it to <code>_layouts/tags.html</code>. I can now create it by creating a
page called <code>tags.html</code>  with the only content being:
</p>

<div class="org-src-container">
<pre class="src src-liquid">---
layout: tags
title: Tags
---
</pre>
</div>
</div>
</div>

<div id="outline-container-org6cb56d9" class="outline-2">
<h2 id="org6cb56d9">Still shipping fast - Related posts still ignore tags</h2>
<div class="outline-text-2" id="text-org6cb56d9">
<p>
There are some more things that I want to do with tags, such as basing related
posts on them, but that takes a bit more investment. I'm still <a href="../how-i-learned-to-let-go-and-ship-it">letting go and
shipping</a>, so for now it's just tags.
</p>
</div>
</div>
</main>
<footer id="postamble" class="status">
&copy; 2021-2025 Bart van Nierop. All rights reserved.

<script data-goatcounter="https://bvnierop.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
</footer>
</body>
</html>
