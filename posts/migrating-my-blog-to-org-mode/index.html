<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2025-09-30 Tue 17:19 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Migrating my blog to org-mode</title>
<meta name="generator" content="Org mode">
<meta name="author" content="root">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" integrity="sha384-DyZ88mC6Up2uqS4h/KRgHuoeGwBcD4Ng9SiP4dIRy0EXTlnuz47vAwmeGwVChigm" crossorigin="anonymous">        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/light.css">        <link rel="stylesheet" href="/css/style.css"> 	        <!-- Icons -->       <link rel="apple-touch-icon" sizes="180x180" href="/img/icons/apple-touch-icon.png">       <link rel="icon" type="image/png" sizes="32x32" href="/img/icons/favicon-32x32.png">       <link rel="icon" type="image/png" sizes="16x16" href="/img/icons/favicon-16x16.png">       <link rel="manifest" href="/img/icons/site.webmanifest">       <link rel="mask-icon" href="/img/icons/safari-pinned-tab.svg" color="#5bbad5">       <link rel="shortcut icon" href="/img/icons/favicon.ico">       <meta name="msapplication-TileColor" content="#da532c">       <meta name="msapplication-config" content="/img/icons/browserconfig.xml">       <meta name="theme-color" content="#ffffff">
<script type="text/javascript">
// @license magnet:?xt=urn:btih:e95b018ef3580986a04669f1b5879592219e2a7a&dn=public-domain.txt Public Domain
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<header id="preamble" class="status">
<aside>
  <a href="/">
    <img class="avatar" src="/img/photo.jpg"/>
  </a>
  <section>
    I help people solve hard problems. This often involves a computer.
  </section>

  <nav class="nav">
    <ul>
      <li>
        <a class="nav-item" href="/">Home</a>
        |
      </li>
      <li>
        <a class="nav-item" href="/posts/">Blog</a>
        |
      </li>

      <li>
        <a class="nav-item" href="/talks/">Talks</a>
        |
      </li>

      <li>
        <a class="nav-item" href="https://stackoverflow.com/users/2700399/bart-van-nierop">
          <i class="fab fa-stack-overflow"></i>
        </a>
        |
      </li>

      <li>
        <a class="nav-item" href="https://github.com/bvnierop">
          <i class="fab fa-github-square"></i>
        </a>
        |
      </li>

      <li>
        <a class="nav-item" href="https://www.linkedin.com/in/bart-van-nierop/">
          <i class="fab fa-linkedin"></i>
        </a>
      </li>

    </ul>
  </nav>
</aside>
</header>
<main id="content">
<header>
<h1 class="title">Migrating my blog to org-mode</h1>
<p class="subtitle">Oct 15, 2021</p>
</header><p>
Some time ago I started this mostly inactive blog. There are several reasons for
that inactivity, but one that stands out is the workflow. I don't like the
limitations imposed on me by the combination of Jekyll, Github Pages and
Markdown.
</p>

<p>
Furthermore I do almost all of my editing in Emacs. I keep my notes in
<a href="https://github.com/org-roam/org-roam">org-roam</a>. All in all, writing my posts in org-mode rather than in Markdown makes
sense.
</p>

<p>
This posts documents my steps.
</p>

<div id="outline-container-org74fe0d2" class="outline-2">
<h2 id="org74fe0d2">Requirements</h2>
<div class="outline-text-2" id="text-org74fe0d2">
<p>
The first step is determining what I need to do. I want mostly feature parity
with my existing blog.
</p>
</div>
<div id="outline-container-orgab8b18e" class="outline-3">
<h3 id="orgab8b18e">Musts</h3>
<div class="outline-text-3" id="text-orgab8b18e">
<ul class="org-ul">
<li>Porting my posts to org-mode</li>
<li>Exporting my posts</li>
<li>No urls ending with <code>.html</code></li>
<li>index.html with a few posts and navigation to older posts</li>
<li>Similar layouts</li>
<li>Support for tags</li>
<li>Some analytics</li>
</ul>
</div>
</div>
<div id="outline-container-org0dc57b1" class="outline-3">
<h3 id="org0dc57b1">Nice</h3>
<div class="outline-text-3" id="text-org0dc57b1">
<ul class="org-ul">
<li>RSS feed</li>
<li>Sitemap</li>
<li>Archive (one page with all posts)</li>
<li>Search widget</li>
</ul>
</div>
</div>

<div id="outline-container-orgcdbfc00" class="outline-3">
<h3 id="orgcdbfc00">Issues encountered while developing</h3>
<div class="outline-text-3" id="text-orgcdbfc00">
<ul class="org-ul">
<li>The 'os' part of Pop!_OS looks offset.</li>
<li>No syntax coloring</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgc36942a" class="outline-2">
<h2 id="orgc36942a">The great migration</h2>
<div class="outline-text-2" id="text-orgc36942a">
</div>
<div id="outline-container-orgaf00367" class="outline-3">
<h3 id="orgaf00367">Porting my posts</h3>
<div class="outline-text-3" id="text-orgaf00367">
<p>
Thankfully I did not yet have many posts. I ported all of my posts by hand. My
first post, <code>2021-02-02-first-post.md</code>:
</p>

<div class="org-src-container">
<pre class="src src-markdown">---
layout: post
title: First post
date: 2021-02-02 +0100
tags: [misc]
---

Here goes nothing...
</pre>
</div>

<p>
Now becomes <code>first-post.org</code>:
</p>
<div class="org-src-container">
<pre class="src src-org"><span class="org-org-document-info-keyword">#+title:</span> <span class="org-org-document-title">First post
</span><span class="org-org-document-info-keyword">#+date:</span> <span class="org-org-document-info">[2021-02-02 Tue]
</span><span class="org-org-meta-line">#+filetags: misc</span>

Here goes nothing...
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcd09108" class="outline-3">
<h3 id="orgcd09108">Exporting my posts</h3>
<div class="outline-text-3" id="text-orgcd09108">
<p>
To export my posts I need to of course be able to reach them. Since I'll be
generating the real index file later, I'll start with a simple <code>index.org</code> that
references the other files. That way I can link them.
</p>
</div>

<div id="outline-container-org9b1f57b" class="outline-4">
<h4 id="org9b1f57b">One step building</h4>
<div class="outline-text-4" id="text-org9b1f57b">
<p>
In order to build in one step I'll create a file called <code>publish.el</code> and invoke
that from a bash script called <code>build</code>.
</p>
</div>
</div>

<div id="outline-container-orgb7ac589" class="outline-4">
<h4 id="orgb7ac589">Exporting the posts</h4>
<div class="outline-text-4" id="text-orgb7ac589">
<p>
Org-mode comes with a very powerful <a href="https://orgmode.org/manual/Publishing.html">publishing system</a> which I'll use to convert
my org files to html.
</p>

<p>
I start by setting up a <i>project</i> and publishing that.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span class="org-keyword">require</span> '<span class="org-constant">ox-publish</span>)
(<span class="org-keyword">let</span> ((org-publish-project-alist
       (list
        (list <span class="org-string">"blog"</span>                                    <span class="org-comment-delimiter">;; </span><span class="org-comment">name of the project
</span>              <span class="org-builtin">:base-directory</span> <span class="org-string">"./org"</span>                   <span class="org-comment-delimiter">;; </span><span class="org-comment">directory to take files from
</span>              <span class="org-builtin">:base-extension</span> <span class="org-string">"org"</span>                     <span class="org-comment-delimiter">;; </span><span class="org-comment">only take files with this extension
</span>              <span class="org-builtin">:publishing-directory</span> <span class="org-string">"./publish"</span>         <span class="org-comment-delimiter">;; </span><span class="org-comment">output directory
</span>              <span class="org-builtin">:recursive</span> t                              <span class="org-comment-delimiter">;; </span><span class="org-comment">parse recursively, otherwise only index.org would be parsed
</span>              <span class="org-builtin">:publishing-function</span> 'org-html-publish-to-html)))) <span class="org-comment-delimiter">;; </span><span class="org-comment">publish as html
</span>  (org-publish <span class="org-string">"blog"</span>))
</pre>
</div>

<p>
This is the most basic project required. And it works. It doesn't look very
good, though. One issue that immediately pops up is that files don't always
rebuild. Only changed files do. This is quite cool at a first glance, but it
only looks at the <i>source</i> file. If I delete <code>publish</code>, I cannot recreate it
without saving all of my <code>org</code> files. I can solve that by setting
<code>org-publish-use-timestamps-flag</code> to <code>nil</code>
</p>
</div>
</div>

<div id="outline-container-org828b51b" class="outline-4">
<h4 id="org828b51b">Watching the result</h4>
<div class="outline-text-4" id="text-org828b51b">
<p>
In order to watch the result, we need to start a webserver in the <code>publish</code>
directory that was just created. Easy enough:
</p>

<div class="org-src-container">
<pre class="src src-bash">python3 -m http.server
</pre>
</div>

<p>
It looks horrible, but it all works.
</p>
</div>
</div>
</div>

<div id="outline-container-orgff63c63" class="outline-3">
<h3 id="orgff63c63">No urls ending with .html</h3>
<div class="outline-text-3" id="text-orgff63c63">
<p>
While possible to replicate Jekyll's behaviour here, it's a bit of work that I
don't really care to invest. I only have a few posts. I can live with them
moving.
</p>
</div>
</div>

<div id="outline-container-org19d3e13" class="outline-3">
<h3 id="org19d3e13">A new <code>index.html</code></h3>
</div>
</div>

<div id="outline-container-orgd026aea" class="outline-2">
<h2 id="orgd026aea">Link dump</h2>
<div class="outline-text-2" id="text-orgd026aea">
<ul class="org-ul">
<li><a href="https://www.taingram.org/blog/org-mode-blog.html">https://www.taingram.org/blog/org-mode-blog.html</a></li>
<li><a href="https://duncan.codes/posts/2019-09-03-migrating-from-jekyll-to-org/">https://duncan.codes/posts/2019-09-03-migrating-from-jekyll-to-org/</a></li>
</ul>
</div>
</div>
</main>
<footer id="postamble" class="status">
&copy; 2021-2025 Bart van Nierop. All rights reserved.

<script data-goatcounter="https://bvnierop.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
</footer>
</body>
</html>
